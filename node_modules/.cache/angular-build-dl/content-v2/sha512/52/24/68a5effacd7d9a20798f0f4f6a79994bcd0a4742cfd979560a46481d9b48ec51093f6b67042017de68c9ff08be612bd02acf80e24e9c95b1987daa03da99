{"version":3,"sources":["webpack:///src/app/components/mapa/mapa.component.html","webpack:///src/app/tab1/tab1.page.html","webpack:///src/app/components/mapa/mapa.component.scss","webpack:///src/app/components/mapa/mapa.component.ts","webpack:///src/app/tab1/tab1-routing.module.ts","webpack:///src/app/tab1/tab1.module.ts","webpack:///src/app/tab1/tab1.page.scss","webpack:///src/app/tab1/tab1.page.ts"],"names":["MapaComponent","created","createMap","miMapa","attribution","addTo","setTimeout","invalidateSize","on","console","log","myroute","addData","type","features","line","selector","template","routes","path","component","Tab1PageRoutingModule","imports","forChild","exports","Tab1PageModule","declarations","Tab1Page","router","http","authS","camera","paraTi","fotos","rutas","friends","friendsRoutes","mapas","you","getUser","pestanaParaTi","getFriends","getOwnRoutes","id","getRoutes","then","data","dat","JSON","parse","status","result","forEach","element","route","title","username","avatar","coordinates","push","error","err","aux","getFriendsRoutes","length","friend"],"mappings":"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","file":"tab1-tab1-module-es5.js","sourcesContent":["export default \"<ion-card>\\r\\n  <ion-card-header>\\r\\n    <ion-card-title>{{this.title}}</ion-card-title>\\r\\n  </ion-card-header>\\r\\n  <ion-card-content>\\r\\n    <div id=\\\"miMapa\\\" style=\\\"height: max-content; width: max-content;\\\"></div>\\r\\n  </ion-card-content>\\r\\n</ion-card>\";","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar class=\\\"background-toolbar\\\">\\r\\n    <ion-segment value=\\\"all\\\">\\r\\n      <ion-segment-button value=\\\"parati\\\" class=\\\"background-button-toolbar1\\\" (click)='this.pestanaParaTi()'>\\r\\n        Amigos\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"fotos\\\" class=\\\"background-button-toolbar\\\" (click)='this.pestanaRutas()'>\\r\\n        Tú\\r\\n      </ion-segment-button>\\r\\n    </ion-segment>\\r\\n  </ion-toolbar>\\r\\n\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" *ngIf='this.paraTi'>\\r\\n  <ion-list *ngFor=\\\"let Route of this.friendsRoutes; let i=index;\\\">\\r\\n    <ion-item>\\r\\n      <ion-card>\\r\\n        <ion-card-header>\\r\\n          <ion-card-title>\\r\\n            {{Route.title}}\\r\\n          </ion-card-title>\\r\\n        </ion-card-header>\\r\\n      </ion-card>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" *ngIf='this.fotos'>\\r\\n  <ion-card>\\r\\n        <img src=\\\"{{this.myphoto}}\\\" />\\r\\n        <ion-card-header>\\r\\n          <ion-card-title>Título de la ruta</ion-card-title>\\r\\n          <ion-card-subtitle>{{this.you.username}}</ion-card-subtitle>\\r\\n        </ion-card-header>\\r\\n      </ion-card>\\r\\n</ion-content>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" *ngIf='this.rutas'>\\r\\n  <ion-list *ngFor=\\\"let Route of this.routes; let i=index;\\\">\\r\\n    <ion-item>\\r\\n        <app-mapa line=\\\"{{this.Route.coordinates}}\\\" title=\\\"this.title\\\"></app-mapa>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbWFwYS9tYXBhLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, Input, OnInit } from '@angular/core'\r\nimport { GeoJSON,geoJSON, Map, tileLayer } from 'leaflet';\r\n\r\n@Component({\r\n  selector: 'app-mapa',\r\n  templateUrl: './mapa.component.html',\r\n  styleUrls: ['./mapa.component.scss'],\r\n})\r\nexport class MapaComponent implements OnInit {\r\n\r\n  created = false;\r\n  miMapa:Map;\r\n  @Input() line: any\r\n  title:string;\r\n  \r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n    this.createMap();\r\n  }\r\n\r\n  public createMap() {\r\n    this.created = true;\r\n    this.miMapa = new Map(\"miMapa\");\r\n    tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n}).addTo(this.miMapa);\r\n    setTimeout(() => {\r\n      this.miMapa.invalidateSize();\r\n    }, 400);\r\n    this.miMapa.on(\"load\",()=>{\r\n      console.log(\"CARGADO\");\r\n      let myroute:GeoJSON=new GeoJSON();\r\n    myroute.addTo(this.miMapa);\r\n    myroute.addData({\r\n      type:\"FeatureCollection\",\r\n      features: [this.line]\r\n    }as any);\r\n    });\r\n  \r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { Tab1Page } from './tab1.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: Tab1Page,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class Tab1PageRoutingModule {}\r\n","import { IonicModule } from '@ionic/angular';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab1Page } from './tab1.page';\r\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\r\n\r\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\r\nimport { MapaComponent } from '../components/mapa/mapa.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ExploreContainerComponentModule,\r\n    Tab1PageRoutingModule\r\n  ],\r\n  declarations: [Tab1Page, MapaComponent]\r\n})\r\nexport class Tab1PageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MifQ== */\";","import { Component, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Map, Polyline, tileLayer } from 'leaflet';\r\nimport { User } from '../model/User';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { HttpService } from '../services/http.service';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\n\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss']\r\n})\r\nexport class Tab1Page {\r\n\r\n  private paraTi = true;\r\n  private fotos = false;\r\n  private rutas = false;\r\n  private friends:User[]=[];\r\n  public routes=[];\r\n  public friendsRoutes=[];\r\n  private you:User;\r\n  public mapas:Map[]=[];\r\n  public line:any;\r\n\r\n  constructor(private router:Router,\r\n     private http:HttpService,\r\n     private authS:AuthService,\r\n     private camera:Camera) {\r\n       this.you = this.authS.getUser();\r\n     }\r\n\r\n  ionViewWillEnter(){\r\n    this.paraTi = true;\r\n    this.pestanaParaTi();\r\n  }\r\n\r\n  \r\n  public pestanaParaTi(){\r\n    if(!this.paraTi){\r\n      this.rutas = false;\r\n      this.paraTi = true;\r\n      this.getFriends();\r\n    }\r\n  }\r\n\r\n  public pestanaRutas(){\r\n    if(!this.rutas){\r\n      this.paraTi = false;\r\n      this.rutas = true;\r\n      this.getOwnRoutes();\r\n      \r\n    }\r\n  }\r\n\r\n \r\n\r\n  public getOwnRoutes(){\r\n    this.routes = [];\r\n    this.mapas = [];\r\n    this.line = null;\r\n    if(this.you.id != -1){\r\n      this.http.getRoutes(this.you.id).then((data)=>{\r\n        if(data){\r\n          let dat = JSON.parse(data.data);\r\n          if(dat.status == \"0\"){\r\n            //todo ok\r\n            dat.result.forEach(element => {\r\n              let route = {\r\n                title:element.title,\r\n                username:this.you.username,\r\n                avatar:this.you.avatar,\r\n                coordinates:element.coordinates\r\n                \r\n              }\r\n              this.routes.push(route);\r\n            });\r\n          }else{\r\n            //toast\r\n            console.error(\"toast\");\r\n          }\r\n        }\r\n      }).catch((err)=>{\r\n        console.error(err);\r\n      });\r\n    }\r\n  }\r\n\r\n  public getFriends(){\r\n    this.friends = [];\r\n    this.http.getFriends(this.you.id).then((data)=>{\r\n      if(data){\r\n        let dat = JSON.parse(data.data);\r\n        if (dat.status == \"0\") {\r\n          //Todo ok\r\n          dat.result.forEach(element => {\r\n            let aux = {\r\n              id:element.id,\r\n              username:element.username,\r\n              avatar:element.avatar\r\n            }\r\n            console.error(\"FRIENDS --> \" + aux.username);\r\n            this.friends.push(aux);\r\n            this.getFriendsRoutes();\r\n          });\r\n        }\r\n      }\r\n    }).catch((err)=>{\r\n      console.error(\"Error en getFriends -> \" +err);\r\n    });\r\n  }\r\n\r\n  public getFriendsRoutes(){\r\n    if(this.friends.length > 0){\r\n      this.friends.forEach((friend)=>{\r\n        this.http.getRoutes(friend.id).then((data)=>{\r\n          if(data){\r\n            let dat = JSON.parse(data.data);\r\n            if(dat.status == \"0\"){\r\n              //todo ok\r\n              let route = {\r\n                title:dat.result.title,\r\n                username:friend.username,\r\n                avatar:friend.avatar,\r\n                coordinates:dat.result.coordinates\r\n              }\r\n              this.friendsRoutes.push(route);\r\n            }else{\r\n              //toast\r\n            }\r\n          }\r\n        }).catch((err)=>{\r\n          //toast\r\n          console.error(\"ERROR OBTENIENDO RUTAS \" + err);\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n"]}