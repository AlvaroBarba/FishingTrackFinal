{"version":3,"sources":["./src/app/tab3/tab3.page.html","./src/app/services/background-geo.service.ts","./src/app/tab3/tab3-routing.module.ts","./src/app/tab3/tab3.module.ts","./src/app/tab3/tab3.page.scss","./src/app/tab3/tab3.page.ts"],"names":[],"mappings":"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","file":"tab3-tab3-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar class=\\\"background-toolbar\\\">\\n    <ion-title class=\\\"textColor\\\">\\n      Ruta\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div id=\\\"mapa\\\" style=\\\"height: 75%; width: 150%;\\\"></div>\\n  <div class=\\\"changeButton\\\">\\n    <button style=\\\"background-color: transparent; max-width: 125px; max-height: 125px;\\\" block (click)=\\\"this.changeButton()\\\" >\\n      <ion-img src=\\\"assets/buttons/play.png\\\" *ngIf=\\\"this.change\\\"></ion-img>\\n      <ion-img src=\\\"assets/buttons/stop.png\\\" *ngIf=\\\"!this.change\\\"></ion-img>\\n    </button>\\n  </div>\\n\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { BackgroundGeolocation, BackgroundGeolocationConfig, BackgroundGeolocationEvents, BackgroundGeolocationLocationProvider, BackgroundGeolocationProvider, BackgroundGeolocationResponse } from '@ionic-native/background-geolocation/ngx';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { geoJSON, Map, Polyline, tileLayer } from 'leaflet';\nimport { addListener } from 'process';\nimport { User } from '../model/User';\nimport { AuthService } from './auth.service';\nimport { HttpService } from './http.service';\nimport { ToastService } from './toast.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BackgroundGeoService {\n\n  line: any;\n  flag = true;\n  polyline: Polyline;\n  mapa: Map;\n  coordinates: {\n    lat: any,\n    lng: any\n  };\n  user: User;\n  route: {\n    id: any,\n    title: string,\n    polyline: any\n  };\n  i: number = 0;\n  created = false;\n\n  config: BackgroundGeolocationConfig = {\n    desiredAccuracy: 10,\n    stationaryRadius: 20,\n    distanceFilter: 5,\n    debug: false, //  Activa un sonido mientras este activa, para poder comprobar su funcionamiento\n    stopOnTerminate: true, // borrar configuracion cuando la app termine(true)\n    notificationText: \"Localizacion activada...\",\n    locationProvider: BackgroundGeolocationLocationProvider.RAW_PROVIDER,\n    startForeground: true,\n    interval: 2000,\n    fastestInterval: 1000\n  };\n\n\n  constructor(\n    private geolocation: BackgroundGeolocation,\n    private toast: ToastService,\n    private http: HttpService,\n    private alert: AlertController,\n    private authS: AuthService) {\n    this.setDefaultPolyline();\n    this.user = this.authS.getUser();\n  }\n\n  public setDefaultPolyline() {\n    this.coordinates = {\n      lat: undefined,\n      lng: undefined\n    }\n    if (!this.created) {\n      this.polyline = new Polyline([], {\n        color: \"red\",\n        opacity: 0.5,\n        weight: 2.5\n      });\n    } else {\n      this.polyline = new Polyline([], {\n        color: \"red\",\n        opacity: 0.5,\n        weight: 2.5\n      }).addTo(this.mapa);\n    }\n  }\n\n\n\n  gps = this.geolocation.configure(this.config).then((response: BackgroundGeolocationResponse) => {\n    this.geolocation.on(BackgroundGeolocationEvents.location).subscribe((location: BackgroundGeolocationResponse) => {\n\n      if (!this.flag) {\n        this.coordinates = {\n          lat: location.latitude,\n          lng: location.longitude\n        }\n        if (this.coordinates && this.created) {\n          this.drawPolyline(this.coordinates);\n          this.mapa.setView(this.coordinates);\n        }\n      }\n\n    });\n    this.geolocation.start();\n    //this.geolocation.finish(); // SOLO IOS\n  });\n\n\n  public startBackgroundGeolocation() {\n    this.geolocation.start();\n    this.flag = false;\n  }\n\n  public async stopBackgroundGeolocation() {\n    this.geolocation.stop();\n    await this.waterLevel();\n    this.flag = true;\n  }\n\n  public async routeTitle(level: number) {\n    const alert = await this.alert.create({\n      cssClass: \"custom\",\n      header: \"Guardar Ruta\",\n      subHeader: \"Titulo de la ruta\",\n      inputs: [\n        {\n          name: \"title\",\n          type: \"text\",\n          placeholder: \"TÃ­tulo\",\n          id: \"routeTitle\"\n        }\n      ],\n      buttons: [\n        {\n          text: \"No\",\n          role: \"cancel\",\n          handler: () => {\n            this.mapa.removeLayer(this.polyline);\n            this.setDefaultPolyline();\n          }\n        },\n        {\n          text: \"Si\",\n          handler: (data) => {\n            this.saveRoute(data.title, level);\n            this.mapa.removeLayer(this.polyline);\n            this.setDefaultPolyline();\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  public async waterLevel() {\n    let selected = -1;\n    const alertWater = await this.alert.create({\n      cssClass: \"custom\",\n      header: \"Nivel del agua\",\n      subHeader: \"Elija el nivel del agua actual\",\n      inputs: [\n        {\n          name: \"highLevel\",\n          type: \"radio\",\n          label: \"Nivel Optimo\",\n          value: \"1\",\n          checked: true\n        },\n        {\n          name: \"mediunLevel\",\n          type: \"radio\",\n          label: \"Nivel Medio\",\n          value: \"2\"\n        },\n        {\n          name: \"lowLevel\",\n          type: \"radio\",\n          label: \"Nivel Bajo\",\n          value: \"3\"\n        }\n      ],\n      buttons: [\n        {\n          text: \"No\",\n          role: \"cancel\",\n          handler: () => {\n            this.mapa.removeLayer(this.polyline);\n            this.setDefaultPolyline();\n          }\n        },\n        {\n          text: \"Si\",\n          handler: (data: number) => {\n            selected = data;\n          }\n        }\n      ]\n    });\n    await alertWater.present();\n    alertWater.onDidDismiss().then(() => {\n      this.routeTitle(selected);\n    });\n  }\n\n  public saveRoute(title, level) {\n    console.log(\"Me cagao 2 \" + this.polyline.getLatLngs());\n    let input = this.polyline.toGeoJSON();\n    this.http.addRoute(this.user.id, title, input, level).then((data) => {\n      if (data) {\n        let dat = JSON.parse(data.data);\n        if (dat.status == \"0\") {\n          //Todo ok\n          this.setDefaultPolyline();\n        } else {\n          //Error guardando ruta\n          this.toast.createToastBottom(\"Error al guardar la ruta...\", true, 400, \"Danger\");\n        }\n      }\n    }).catch(err => {\n      this.toast.createToastBottom(\"Tiempo de espera agotado...\", true, 400, \"Danger\");\n    });\n  }\n\n  public drawPolyline(location) {\n    this.polyline.addTo(this.mapa);\n    this.polyline.addLatLng(location);\n  }\n\n  public createMap() {\n    this.created = true;\n    this.mapa = new Map(\"mapa\").locate({ setView: true, maxZoom: 20 });\n    tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(this.mapa);\n    setTimeout(() => {\n      this.mapa.invalidateSize();\n    }, 400);\n    return this.mapa;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab3Page } from './tab3.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab3PageRoutingModule } from './tab3-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\n    Tab3PageRoutingModule,\n  ],\n  declarations: [Tab3Page]\n})\nexport class Tab3PageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RhYjMvdGFiMy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { Map, Polyline} from 'leaflet';\nimport { BackgroundGeoService } from '../services/background-geo.service';\n\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: 'tab3.page.html',\n  styleUrls: ['tab3.page.scss']\n})\nexport class Tab3Page implements OnInit {\n\n  mapa: Map\n  marcador: any\n  latlngs: any\n  cargaMapa = false\n  linea = undefined;\n  newLat: any\n  newLong: any\n  polyline:Polyline;\n  change: boolean = true;\n  button = \"assets/buttons/play.png\";\n\n  constructor(\n    private location: BackgroundGeoService,\n    private storage: NativeStorage) {\n  }\n\n  ngOnInit() {\n    if (!this.cargaMapa) {\n      this.vistaMapa();\n    }\n  }\n\n  ionViewWillEnter() {\n    if (!this.cargaMapa) {\n      this.vistaMapa();\n    }\n  }\n\n  public async vistaMapa() {\n    this.cargaMapa = true;\n    this.mapa = this.location.createMap();\n  }\n\n  public async refreshRoute() {\n    if (this.cargaMapa)\n      this.location.line.addTo(this.mapa);\n  }\n\n  public startLocation() {\n    this.location.startBackgroundGeolocation();\n\n  }\n\n  public stopLocation() {\n    this.location.stopBackgroundGeolocation();\n  }\n\n  public changeButton(){\n    if(this.change){\n      this.startLocation();\n      this.change = false;\n    }else{\n      this.change = true;\n      this.stopLocation();\n    }\n  }\n\n\n}\n"],"sourceRoot":"webpack:///"}