{"version":3,"sources":["webpack:///src/app/tab4/tab4.page.html","webpack:///src/app/services/auth.service.ts","webpack:///src/app/tab4/tab4-routing.module.ts","webpack:///src/app/tab4/tab4.module.ts","webpack:///src/app/tab4/tab4.page.scss","webpack:///src/app/tab4/tab4.page.ts"],"names":["AuthService","storage","router","user","id","username","password","avatar","setItem","navigate","route","isLogged","providedIn","routes","path","component","Tab4PageRoutingModule","imports","forChild","exports","Tab4PageModule","declarations","Tab4Page","popover","authS","camera","transfer","file","croppedImagepath","isLoading","imagePickerOptions","maximumImagesCount","quality","usuario","getUser","ev","createPopover","logout","console","log","error","options","destinationType","DestinationType","DATA_URL","sourceType","PictureSourceType","PHOTOLIBRARY","saveToPhotoAlbum","allowEdit","targetWidth","targetHeight","getPicture","then","imageData","myphoto","err","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCQFA,WAAW;AAStB,6BAAoBC,OAApB,EACUC,MADV,EAC0B;AAAA;;AADN,eAAAD,OAAA,GAAAA,OAAA;AACV,eAAAC,MAAA,GAAAA,MAAA;AARH,eAAAC,IAAA,GAAO;AACZC,cAAE,EAAE,CAAC,CADO;AAEZC,oBAAQ,EAAE,EAFE;AAGZC,oBAAQ,EAAE,EAHE;AAIZC,kBAAM,EAAE;AAJI,WAAP;AASN;;AAXqB;AAAA;AAAA,mCAaA;;;;;;AACpB,2BAAKJ,IAAL,GAAY;AACVC,0BAAE,EAAE,CAAC,CADK;AAEVC,gCAAQ,EAAE,EAFA;AAGVC,gCAAQ,EAAE,EAHA;AAIVC,8BAAM,EAAE;AAJE,uBAAZ;;AAMA,6BAAM,KAAKN,OAAL,CAAaO,OAAb,CAAqB,MAArB,EAA6B,KAAKL,IAAlC,CAAN;;;AACA,2BAAKD,MAAL,CAAYO,QAAZ,CAAqB,CAAC,OAAD,CAArB;;;;;;;;;AACD;AAtBqB;AAAA;AAAA,gCAwBHN,IAxBG,EAwBS;;;;;;;AACjB,6BAAM,KAAKF,OAAL,CAAaO,OAAb,CAAqB,MAArB,EAA6BL,IAA7B,CAAN;;;AAAZ,2BAAKA,I;AACL,2BAAKD,MAAL,CAAYO,QAAZ,CAAqB,CAAC,GAAD,CAArB;;;;;;;;;AACD;AA3BqB;AAAA;AAAA,sCA6BVC,KA7BU,EA6BmB;AACvC,gBAAI,CAAC,KAAKC,QAAL,EAAL,EAAsB;AACpB,mBAAKT,MAAL,CAAYO,QAAZ,CAAqB,CAAC,SAAD,CAArB;AACA,qBAAO,KAAP;AACD;;AACD,mBAAO,IAAP;AACD;AAnCqB;AAAA;AAAA,qCAqCd;AACN,gBAAG,KAAKN,IAAL,CAAUC,EAAV,IAAc,CAAC,CAAlB,EAAoB;AAClB,qBAAO,IAAP;AACD,aAFD,MAEK;AACH,qBAAO,KAAP;AACD;AACF;AA3CqB;AAAA;AAAA,oCA6CZ;AACR,mBAAO,KAAKD,IAAZ;AACD;AA/CqB;;AAAA;AAAA,S;;;;gBANf;;gBADqC;;;;AAOjCH,iBAAW,6DAHvB,iEAAW;AACVY,kBAAU,EAAE;AADF,OAAX,CAGuB,GAAXZ,WAAW,CAAX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHb,UAAMa,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,qBAAqB;AAAA;AAAA,O;;AAArBA,2BAAqB,6DAJjC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,cAAc;AAAA;AAAA,O;;AAAdA,oBAAc,6DAT1B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,0EAJO,CADD;AAORI,oBAAY,EAAE,CAAC,mDAAD;AAPN,OAAT,CAS0B,GAAdD,cAAc,CAAd;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCiBFE,QAAQ;AAenB,0BACUC,OADV,EAEUC,KAFV,EAGUtB,MAHV,EAIUuB,MAJV,EAKUC,QALV,EAMUC,IANV,EAMoB;AAAA;;AALV,eAAAJ,OAAA,GAAAA,OAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AACA,eAAAtB,MAAA,GAAAA,MAAA;AACA,eAAAuB,MAAA,GAAAA,MAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAC,IAAA,GAAAA,IAAA;AAfV,eAAAC,gBAAA,GAAmB,EAAnB;AACA,eAAAC,SAAA,GAAY,KAAZ;AAEA,eAAAC,kBAAA,GAAqB;AACnBC,8BAAkB,EAAE,CADD;AAEnBC,mBAAO,EAAE;AAFU,WAArB;AAaE,eAAKC,OAAL,GAAeT,KAAK,CAACU,OAAN,EAAf;AACA,eAAK3B,MAAL;AACD;;AAxBkB;AAAA;AAAA,qCA4BR,CACV;AA7BkB;AAAA;AAAA,sCA+BD4B,EA/BC,EA+BC;;;;;;AAClB,2BAAKZ,OAAL,CAAaa,aAAb,CAA2BD,EAA3B;;;;;;;;;AACD;AAjCkB;AAAA;AAAA,mCAmCA;;;;;;;AACjB,6BAAM,KAAKX,KAAL,CAAWa,MAAX,EAAN;;;AACA,0BAAG,CAAC,KAAKb,KAAL,CAAWb,QAAX,EAAJ,EAA0B;AACxB,6BAAKT,MAAL,CAAYO,QAAZ,CAAqB,CAAC,QAAD,CAArB;AACD;;;;;;;;;AACF;AAxCkB;AAAA;AAAA,mCA0CN;AACX6B,mBAAO,CAACC,GAAR,CAAY,KAAKN,OAAL,CAAa1B,MAAzB;;AACA,gBAAG,KAAK0B,OAAL,CAAa1B,MAAb,IAAuB,EAA1B,EAA6B;AAC3B+B,qBAAO,CAACC,GAAR,CAAY,UAAZ;AACA,mBAAKN,OAAL,CAAa1B,MAAb,GAAsB,yBAAtB;AACD;AACD;AAhDiB;AAAA;AAAA,sCAkDN;AAAA;;AACV+B,mBAAO,CAACE,KAAR,CAAc,MAAd;AACD,gBAAMC,OAAO,GAAkB;AAC7BC,6BAAe,EAAE,KAAKjB,MAAL,CAAYkB,eAAZ,CAA4BC,QADhB;AAE7BC,wBAAU,EAAE,KAAKpB,MAAL,CAAYqB,iBAAZ,CAA8BC,YAFb;AAG7BC,8BAAgB,EAAE,KAHW;AAI7BC,uBAAS,EAAC,IAJmB;AAK7BC,yBAAW,EAAC,GALiB;AAM7BC,0BAAY,EAAC;AANgB,aAA/B;AAQA,iBAAK1B,MAAL,CAAY2B,UAAZ,CAAuBX,OAAvB,EAAgCY,IAAhC,CAAqC,UAACC,SAAD,EAAe;AAClD;AACA;AACA,mBAAI,CAACC,OAAL,GAAe,4BAA4BD,SAA3C;AACD,aAJD,EAIG,UAACE,GAAD,EAAS,CACV;AACD,aAND;AAOD;AAnEkB;;AAAA;AAAA,S;;;;gBAZZ;;gBADA;;gBAFA;;gBAIA;;gBAGA;;gBADA;;;;AASIlC,cAAQ,6DALpB,gEAAU;AACTmC,gBAAQ,EAAE,UADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,0FAFS;;;;AAAA,OAAV,CAKoB,GAARpC,QAAQ,CAAR","file":"tab4-tab4-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar class=\\\"background-toolbar\\\">\\n    <ion-title class=\\\"textColor\\\">\\n      Perfil\\n    </ion-title>\\n  </ion-toolbar>\\n  <ion-card color=\\\"light\\\">\\n    <div class=\\\"img-wrapper\\\">\\n      <ion-avatar slot=\\\"start\\\"  (click)=\\\"this.cropImage()\\\">\\n        <img src=\\\"{{this.usuario.avatar}}\\\">\\n      </ion-avatar>\\n        </div>\\n    <ion-card-content class=\\\"ion-text-center\\\">\\n      <h2>{{this.usuario.username}}</h2>\\n      <ion-text color=\\\"medium\\\">\\n      </ion-text>\\n    </ion-card-content>\\n  </ion-card>\\n  <ion-list>\\n    <ion-item>\\n      <ion-icon slot=\\\"end\\\" name=\\\"chevron-forward-sharp\\\"></ion-icon>\\n      <ion-label>Fotos</ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"end\\\" name=\\\"chevron-forward-sharp\\\"></ion-icon>\\n      <ion-label>Rutas</ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-icon slot=\\\"end\\\" name=\\\"chevron-forward-sharp\\\"></ion-icon>\\n      <ion-label>Todo</ion-label>\\n    </ion-item>\\n  </ion-list>\\n  <ion-list>\\n    <ion-label></ion-label>\\n    <ion-item>\\n      <ion-button (click)=\\\"this.logout()\\\" class=\\\"background-button\\\"shape=\\\"round\\\">Cerrar Sesi√≥n<ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n  </ion-list>\\n  \";","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { User } from '../model/User';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService implements CanActivate {\n\n  public user = {\n    id: -1,\n    username: '',\n    password: '',\n    avatar: ''\n  }\n\n  constructor(private storage: NativeStorage,\n    private router: Router) {\n  }\n\n  public async logout() {\n    this.user = {\n      id: -1,\n      username: '',\n      password: '',\n      avatar: ''\n    }\n    await this.storage.setItem(\"user\", this.user);\n    this.router.navigate([\"login\"]);\n  }\n\n  public async login(user: User) {\n    this.user = await this.storage.setItem(\"user\", user);\n    this.router.navigate([\"/\"]);\n  }\n\n  canActivate(route: ActivatedRouteSnapshot): boolean {\n    if (!this.isLogged()) {\n      this.router.navigate([\"welcome\"]);\n      return false;\n    }\n    return true;\n  }\n\n  isLogged():boolean{\n    if(this.user.id!=-1){\n      return true;\n    }else{\n      return false;\n    }\n  }\n\n  getUser() {\n    return this.user;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Tab4Page } from './tab4.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab4Page\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class Tab4PageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { Tab4PageRoutingModule } from './tab4-routing.module';\n\nimport { Tab4Page } from './tab4.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    Tab4PageRoutingModule\n  ],\n  declarations: [Tab4Page]\n})\nexport class Tab4PageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RhYjQvdGFiNC5wYWdlLnNjc3MifQ== */\";","import { IfStmt } from '@angular/compiler';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { User } from '../model/User';\nimport { AuthService } from '../services/auth.service';\nimport { PopoverService } from '../services/popover.service';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { ActionSheetController } from '@ionic/angular';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileTransfer, FileUploadOptions, FileTransferObject} from '@ionic-native/file-transfer/ngx';\n\n\n@Component({\n  selector: 'app-tab4',\n  templateUrl: './tab4.page.html',\n  styleUrls: ['./tab4.page.scss'],\n})\nexport class Tab4Page implements OnInit {\n\n  usuario : User;\n  \n  myphoto:any;\n\n  croppedImagepath = \"\";\n  isLoading = false;\n\n  imagePickerOptions = {\n    maximumImagesCount: 1,\n    quality: 50\n  };\n\n\n  constructor(\n    private popover:PopoverService,\n    private authS: AuthService, \n    private router: Router, \n    private camera: Camera, \n    private transfer: FileTransfer, \n    private file: File,  ) { \n    this.usuario = authS.getUser();\n    this.avatar();\n  }\n\n\n\n  ngOnInit() {\n  }\n\n  async showPopover(ev){\n    this.popover.createPopover(ev);\n  }\n\n  public async logout(){\n    await this.authS.logout();\n    if(!this.authS.isLogged()){\n      this.router.navigate(['/login'])\n    }\n  }\n\n  public avatar(){\n    console.log(this.usuario.avatar);\n    if(this.usuario.avatar == \"\"){\n      console.log(\"soy nulo\");\n      this.usuario.avatar = \"assets/icon/usuario.svg\";\n    }\n   }\n\n   cropImage() {\n     console.error(\"Hola\");\n    const options: CameraOptions = {\n      destinationType: this.camera.DestinationType.DATA_URL,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      saveToPhotoAlbum: false,\n      allowEdit:true,\n      targetWidth:300,\n      targetHeight:300\n    }\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      this.myphoto = 'data:image/jpeg;base64,' + imageData;\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n}\n"]}